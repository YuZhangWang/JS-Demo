<!--orderinfo.wxml-->
<import src="../template/couponlist.wxml" />
<import src="../template/cardlist.wxml" />
<import src="../template/giftcardlist.wxml" />
<import src="../../youzan/dist/switch/index.wxml" />
<import src="../template/passwordCheck.wxml" />
<wxs src="../../utils/comm.wxs" module="mTool" />
<wxs module="m1">
  var getFixedMoney = function(money) {
    if (typeof(money) !== "undefined") {
      return Number(money / 100).toFixed(2);
    } else {
      return 0;
    }
  }
  var getSplitText = function(text) {
    return text.split(" ");
  }
  var getCouponDiscount = function(selectedCoupon, goodsList, orderData) {
    if (orderData && orderData.ticketId) {
      return orderData.ticketPrice;
    }

    var discountMoney = selectedCoupon.money;
    if (selectedCoupon.useLimitType == 1) {
      for (var i = 0; i < goodsList.length; i++) {
        var goods = goodsList[i];
        if (selectedCoupon.busiId == goods.id) {
          var discountMoney = selectedCoupon.money;
          if (discountMoney > goods.price) {
            discountMoney = goods.price;
          }
        }
      }
    }
    return discountMoney;
  }
  var getAllPrice = function(money, orderData, selectedCoupon, goodsList) {
    var totalMoney = money;
    if (orderData) {
      if (orderData.ticketId) {
        totalMoney = money - orderData.ticketPrice;
      }
    } else if (selectedCoupon) {
      totalMoney -= getCouponDiscount(selectedCoupon, goodsList);
    }
    if (totalMoney < 0) {
      totalMoney = 0;
    }
    return totalMoney;
  }
  module.exports.getCouponDiscount = getCouponDiscount;
  module.exports.getFixedMoney = getFixedMoney;
  module.exports.getAllPrice = getAllPrice;
  module.exports.getSplitText = getSplitText;
</wxs>
<view class="theme-wrapper app-theme-{{app.globalData.themeId}}">
  <scroll-view class="container">
    <view style='width:100%;height：100%;background: #F5F7F6;'>
      <view class="order-delivery main-color-bg" style="{{app.globalData.customStyleBg}}">
        <view class="order-number" style="font-size: 36rpx;background-size:cover;background-image: url('{{staticResPath}}/image/mobile/info-background.png');" wx:if="{{orderData != null}}">
          <view class="number" style='white-space:nowrap;'>
            <image style="width: 32rpx;height: 32rpx;vertical-align: middle;margin-right: 8rpx;" src="{{staticResPath}}/image/mobile/{{statusIcon}}.png"></image>
            <text id="status" class="state over" style="color:#fff">{{orderStatus}}</text>
          </view>
        </view>
        <!--        <view class="order-number" wx:if="{{orderData != null}}">-->
        <!--          <view class="state over">订单状态：-->
        <!--            <text class='main-color' style="{{app.globalData.customStyleColor}}" id="status">{{orderStatus}}</text>-->
        <!--          </view>-->
        <!--        </view>-->
        <view class="address hide_address" style="background: #fff;color: #333" wx:if="{{orderData != null}}">
          <!-- bindtap="onTapAddress" -->
          <!-- <image wx:if="{{orderData.address}}" src="http://static.resource.fenxiaov3.weijuju.com/image/mobile/umall/orderdetail/pin.png" class="icon-ads" alt="地址图标"></image> -->
          <!-- <block wx:if="{{addressInfo == null}}">
          <view class="address-tip">请填写收货地址</view>
        </block> -->
          <!-- <block wx:else> -->
          <view class="address-message text-black">
            <view>
              <text class='zan-icon zan-icon-pending-evaluate' style='vertical-align:top;padding-top: 1rpx;margin-right:10rpx;font-size:32rpx;color:#333333;'></text>
              <text class="over receiver-title" style="padding-right: 10rpx">{{orderData.clientName}}</text>
              <text class="receiver-name over" id="receiver_name">{{orderData.tel}}</text>
              <!--              <text class="tel over" id="contact_tel">联系方式：{{orderData.tel}}</text>-->
            </view>
            <view class="address-text" wx:if="{{orderData.address}}">
              <text class="address-title">联系地址：</text>
              <text class="receiver-addr" id="receiver_addr">{{orderData.address}}</text>
            </view>
          </view>
          <!-- </block> -->
          <!-- <image wx:if="{{orderData == null}}" src="http://static.resource.fenxiaov3.weijuju.com/image/mobile/umall/orderdetail/arrow-right.png" class="icon-arr" alt="详情图标"></image> -->
          <view class="clear"></view>
        </view>
        <view class="way text-black hide_address" style="display:none;background: #fff;color: #333">配送方式：
          <text class="text-gray" id="delivery_row">商家包邮</text>
        </view>
        <block>
          <view class='orderInfoRef' wx:if="{{orderData && orderDeInf.length !=0 && orderDeInf[0].name}}">
            <view style='display:flex;align-items:center;padding:0 20rpx;'>
              <text class='zan-icon zan-icon-pending-evaluate' style='color:#333333;margin-left:10rpx;margin-right:10rpx;font-size:32rpx;'></text>
              <text>{{orderDeInf[0].name}}：</text>
              <view class='orderInfoDet' wx:if="{{orderDeInf[0].image}}">
                <image src='{{userImagePath + orderDeInf[0].image}}' class='communityPublish-item-add-image'></image>
              </view>
              <view wx:elif="{{orderDeInf[0].type=='select'}}">
                <text decode="{{true}}" wx:key="index" wx:for="{{mTool.splitIndex(orderDeInf[0].value)}}" wx:for-item="subItem">{{orderDeInf[0].sels[subItem]}}&nbsp;&nbsp;</text>
              </view>
              <view class='orderInfoDet' wx:elif="{{orderDeInf[0].type=='radio'}}">
                {{orderDeInf[0].sels[orderDeInf[0].value]}}
              </view>
              <view wx:else>{{orderDeInf[0].value}}</view>
            </view>
            <button class='orderInfoBut main-color' style="{{app.globalData.customStyleColor}}" bindtap='toOrderInfo' wx:if="{{orderDeInf.length >1}}">
              查看更多
            </button>
          </view>
        </block>
      </view>
      <!--<view class="yuyue_time_select {{orderData != null ?'bottom-radius':''}}">-->
      <!--<block wx:if="{{orderData != null}}">-->
      <!--<view class="select_tiem_btn" style="display:flex;align-items:center;padding:18rpx 0;">-->
      <!--<image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>-->
      <!--<view>-->
      <!--<view class="time-tip text-black">-->
      <!--<view style="margin-right: 20rpx;display: inline-block;font-size:28rpx;color:#333333;">预约时间：</view>-->
      <!--<block wx:if="{{orderData.bespeakTime}}">-->
      <!--<view style='color:#333333' class="show_yy_time">{{orderData.bespeakTime}}</view>-->
      <!--</block>-->
      <!--</view>-->
      <!--<view class="time-tip text-black" wx:if="{{orderData.bespeakEndTime}}">-->
      <!--<view style="margin-right: 20rpx;display: inline-block;font-size:28rpx;color:#333333;">结束时间：</view>-->
      <!--<block wx:if="{{orderData.bespeakEndTime}}">-->
      <!--<view style='color:#333333' class="show_yy_time">{{orderData.bespeakEndTime}}</view>-->
      <!--</block>-->
      <!--</view>-->
      <!--</view>-->

      <!--</view>-->
      <!--&lt;!&ndash;          <view class="select_tiem_btn" style="padding:15rpx 0;" >&ndash;&gt;-->
      <!--&lt;!&ndash;            <image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>&ndash;&gt;-->
      <!--&lt;!&ndash;            &ndash;&gt;-->
      <!--&lt;!&ndash;          </view>&ndash;&gt;-->
      <!--</block>-->
      <!--<block wx:else>-->
      <!--<view class="select_tiem_btn" style="padding:15rpx 0;" wx:if="{{prepareOrderVo.goodsList['0'].serviceType == 1}}" bindtap="onShowTimeSelect">-->
      <!--<image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>-->
      <!--<view class="time-tip text-black">-->
      <!--<view style="margin-right: 20rpx;display: inline-block;">预约时间：</view>-->
      <!--<block wx:if="{{yuyueTime}}">-->
      <!--<view class="show_yy_time">{{yuyueTime}}</view>-->
      <!--</block>-->
      <!--<block wx:else>-->
      <!--<view class="show_yy_time">请选择</view>-->
      <!--</block>-->
      <!--</view>-->
      <!--<image class="icon-arr" alt="详情图标" src="http://res.xcx.weijuju.com/image/mobile/trigger_right.png"></image>-->
      <!--</view>-->
      <!--<view class="select_tiem_btn" bindtap="onShowTimeSelect" wx:if="{{prepareOrderVo.goodsList['0'].serviceType == 1 && bespeakEndTime}}" data-isshowendtime="true" style="padding:4rpx 0;border-top:solid 1px #eee;">-->
      <!--<image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>-->
      <!--<view class="time-tip text-black">-->
      <!--<view style="margin-right: 20rpx;display: inline-block;">结束时间：</view>-->
      <!--<block wx:if="{{yuyueEndTime}}">-->
      <!--<view class="show_yy_time">{{yuyueEndTime}}</view>-->
      <!--</block>-->
      <!--<block wx:else>-->
      <!--<view class="show_yy_time">请选择</view>-->
      <!--</block>-->
      <!--</view>-->
      <!--<image class="icon-arr" alt="详情图标" src="http://res.xcx.weijuju.com/image/mobile/trigger_right.png"></image>-->
      <!--</view>-->

      <!--<view class="select_tiem_btn datewrap" wx:if="{{prepareOrderVo.goodsList['0'] && prepareOrderVo.goodsList['0'].serviceType != 1}}">-->
      <!--<view class='date'>开始日期</view>-->
      <!--<picker mode="date" value="{{startDate}}" start="{{nowDate}}" end="{{endDate}}" bindchange="bindDateChange1">-->
      <!--<view class="weui-input">{{startDate}}</view>-->
      <!--</picker>-->
      <!--</view>-->
      <!--<view class="select_tiem_btn datewrap" wx:if="{{prepareOrderVo.goodsList['0'] && prepareOrderVo.goodsList['0'].serviceType != 1}}">-->
      <!--<view class='date'>结束日期</view>-->
      <!--<picker mode="date" value="{{endDate}}" start="{{nowDate3 !='' ? nowDate3 : startDate}}" bindchange="bindDateChange2">-->
      <!--<view class="weui-input">{{endDate}}</view>-->
      <!--</picker>-->
      <!--</view>-->


      <!--</block>-->
      <!--</view>-->
      <view class="bottom-radius">
        <view wx:if="{{showOverReduce}}">
          <view class='overReduce'>
            <view class="free">满减</view>
            <view wx:if="{{overReduceType==1}}">
              <text class='freeText'>购满\t{{overReduceRule[0].over}}\t件，减\t{{overReduceRule[0].reduce}}\t元</text>
            </view>
            <view wx:if="{{overReduceType==2}}">
              <text class='freeText'>购满\t{{overReduceRule[0].over}}\t元，减\t{{overReduceRule[0].reduce}}\t元</text>
            </view>
            <image class="icon-arr" alt="详情图标" src="http://res.xcx.weijuju.com/image/mobile/trigger_right.png"></image>
          </view>
          <view class="overReduceDetail {{showOverReduceDetail?'open_over':'close_over'}}">
            <view wx:for="{{overReduceRule}}">
              <view wx:if="{{overReduceType==1}}">
                <text class='freeText'>购满\t{{item.over}}\t件，减\t{{item.reduce}}\t元</text>
              </view>
              <view wx:if="{{overReduceType==2}}">
                <text class='freeText'>购满\t{{item.over}}\t元，减\t{{item.reduce}}\t元</text>
              </view>
            </view>
          </view>
        </view>
        <!-- 首单立减 -->
        <view wx:if="{{orderData == null && firstOrderDiscount.isOpen == 'true' && firstOrderDiscount.sceneType[1].selected}}">
          <view class='overReduce'>
            <view class="cuxiao free commSpinVal">首单立减</view>
            <view>
              <text class='freeText'>首次下单用户立减{{firstOrderDiscount.reduceMoney}}元</text>
              <text class='freeText' wx:if="{{firstOrderDiscount.isEnjoy == 'true'}}">（同时享受满减）</text>
              <text class='freeText' wx:if="{{firstOrderDiscount.isEnjoy == 'false'}}">（不同时享受满减）</text>
            </view>
          </view>
        </view>
      </view>

      <view class="microshop-box order-goods {{orderData != null ?'radius-20 background-white':'top-radius'}}">
        <view class="tip-carriage hide" id="tip_carriage">
          <text class="icon-carriage"></text>
          <text></text>
        </view>
        <view class="goods_list goods-list radius-20" style="padding: 0">
          <view class="list">
            <view class="list-item" style="background: #fff;" wx:for="{{goodsList}}" wx:for-item="goodsData" wx:key="goodsData.id" data-msgid="{{goodsData.id}}">
              <view data-id="{{goodsData.id}}" bindtap="backToDetail">
                <image class="icon-goods" src="{{ (goodsData.selectedSku && goodsData.selectedSku.img) ? userImagePath + goodsData.selectedSku.img: userImagePath+goodsData.cover}}"></image>
              </view>
              <view class="description">
                <view>
                  <view class="text-black" style="font-size: 30rpx;color: #333333;">{{goodsData.name}}</view>
                </view>
                <view class="amount over" style="font-size: 22rpx;color:#999999;width: 100%;display: flex;justify-content: space-between;">
                  <view class="text-spec" wx:if="{{goodsData.selectedSku}}">
                    ( {{goodsData.selectedSku.names}} )
                  </view>
                  <view class="text-spec" wx:elif="{{goodsData.spec && goodsData.spec.names}}">
                    ( {{goodsData.spec.names}} )
                  </view>
                  <view style="width: 100%;text-align: right;font-size: 26rpx;">
                    <text>{{app.globalData.currencySymbol}}{{m1.getFixedMoney(goodsData.price)}}</text>x
                    <text style="padding-right: 5rpx;">{{goodsData.count}}</text>
                  </view>
                </view>
              </view>
              <!--              <view class="description">-->
              <!--                <view class="text-black over">{{goodsData.name}}</view>-->
              <!--              </view>-->
              <!--              <view class="amount over">-->
              <!--                <view>-->
              <!--                  <view class="text-spec over" wx:if="{{goodsData.selectedSku}}">( {{goodsData.selectedSku.names}} )</view>-->
              <!--                  <view class="text-spec over" wx:elif="{{goodsData.spec && goodsData.spec.names}}">( {{goodsData.spec.names}} )</view>-->
              <!--                </view>-->
              <!--                <view>-->
              <!--                  <text class="text-red main-color" style="{{app.globalData.customStyleColor}}">{{app.globalData.currencySymbol}}{{m1.getFixedMoney(goodsData.price)}}</text> x-->
              <!--                  <text>{{goodsData.count}}</text>-->
              <!--                </view>-->
              <!--              </view>-->
            </view>
          </view>
          <view style="position: relative;background: #fff;width: 100%">
            <view class="total-count text-black">
              <text>共<text class="text-red main-color" style="font-size: 28rpx;{{app.globalData.customStyleColor}}" id="total_count">{{goodsCount}}</text>项预约</text>
              <view class="total fright" style="font-size: 28rpx">合计：
                <text class="text-red main-color" style="display: inline-block;{{app.globalData.customStyleColor}}"><text class="js-total-money" style="font-size: 30rpx;">{{app.globalData.currencySymbol}}{{m1.getFixedMoney(totalPrice)}}</text></text>
              </view>
            </view>
          </view>
        </view>

        <view class="huaer-panel top-radius" wx:if="{{orderData == null}}">
          <!-- 选择时间 -->
          <view class="yuyue_time_select {{orderData != null ?'bottom-radius':''}}">
            <block wx:if="{{orderData != null}}">
              <view class="select_tiem_btn" style="display:flex;align-items:center;padding:18rpx 0;">
                <image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>
                <view>
                  <view class="time-tip text-black">
                    <view style="margin-right: 20rpx;display: inline-block;font-size:28rpx;color:#333333;">预约时间：</view>
                    <block wx:if="{{orderData.bespeakTime}}">
                      <view style='color:#333333' class="show_yy_time">{{orderData.bespeakTime}}</view>
                    </block>
                  </view>
                  <view class="time-tip text-black" wx:if="{{orderData.bespeakEndTime}}">
                    <view style="margin-right: 20rpx;display: inline-block;font-size:28rpx;color:#333333;">结束时间：</view>
                    <block wx:if="{{orderData.bespeakEndTime}}">
                      <view style='color:#333333' class="show_yy_time">{{orderData.bespeakEndTime}}</view>
                    </block>
                  </view>
                </view>

              </view>
              <!--          <view class="select_tiem_btn" style="padding:15rpx 0;" >-->
              <!--            <image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>-->
              <!--            -->
              <!--          </view>-->
            </block>
            <block wx:else>
              <view class="select_tiem_btn" style="padding:15rpx 0;" wx:if="{{prepareOrderVo.goodsList['0'].serviceType == 1}}" bindtap="onShowTimeSelect">
                <image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>
                <view class="time-tip text-black">
                  <view style="margin-right: 20rpx;display: inline-block;">预约时间：</view>
                  <block wx:if="{{yuyueTime}}">
                    <view class="show_yy_time">{{yuyueTime}}</view>
                  </block>
                  <block wx:else>
                    <view class="show_yy_time">请选择</view>
                  </block>
                </view>
                <image class="icon-arr" alt="详情图标" src="http://res.xcx.weijuju.com/image/mobile/trigger_right.png"></image>
              </view>
              <view class="select_tiem_btn" bindtap="onShowTimeSelect" wx:if="{{prepareOrderVo.goodsList['0'].serviceType == 1 && bespeakEndTime}}" data-isshowendtime="true" style="padding:4rpx 0;border-top:solid 1px #eee;">
                <image class="icon-time" alt="时间图标" src="{{staticResPath}}/image/mobile/takeout/time-icon.png"></image>
                <view class="time-tip text-black">
                  <view style="margin-right: 20rpx;display: inline-block;">结束时间：</view>
                  <block wx:if="{{yuyueEndTime}}">
                    <view class="show_yy_time">{{yuyueEndTime}}</view>
                  </block>
                  <block wx:else>
                    <view class="show_yy_time">请选择</view>
                  </block>
                </view>
                <image class="icon-arr" alt="详情图标" src="http://res.xcx.weijuju.com/image/mobile/trigger_right.png"></image>
              </view>

              <view class="select_tiem_btn datewrap" wx:if="{{prepareOrderVo.goodsList['0'] && prepareOrderVo.goodsList['0'].serviceType != 1}}">
                <view class='date'>开始日期</view>
                <picker mode="date" value="{{startDate}}" placeholder="请输入日期" start="{{nowDate}}" end="{{endDate}}" bindchange="bindDateChange1">
                  <view class="weui-input">{{startDate}}</view>
                </picker>
              </view>
              <view class="select_tiem_btn datewrap" wx:if="{{prepareOrderVo.goodsList['0'] && prepareOrderVo.goodsList['0'].serviceType != 1}}">
                <view class='date'>结束日期</view>
                <picker mode="date" value="{{endDate}}" start="{{nowDate3 !='' ? nowDate3 : startDate}}" bindchange="bindDateChange2">
                  <view class="weui-input">{{endDate}}</view>
                </picker>
              </view>


            </block>
          </view>
          <view class="huaer-cell huaer-field">
            <view class="huaer-cell_hd huaer-field_title">联系人</view>
            <input data-type="name" type="text" placeholder="名字" class="huaer-field_input huaer-cell_bd" placeholder-class="huaer-field_placeholder" bindinput="bindKeyInput" value="{{previousName}}" />
          </view>
          <view class="huaer-cell huaer-field">
            <view class="huaer-cell_hd huaer-field_title">联系电话</view>
            <input data-type="tel" type="number" maxlength="11" placeholder="请输入联系电话" class="huaer-field_input huaer-cell_bd" placeholder-class="huaer-field_placeholder" bindinput="bindKeyInput" value="{{previousTel}}" />
          </view>
          <view class="huaer-cell huaer-field" wx:if="{{showAddr}}">
            <view class="huaer-cell_hd huaer-field_title">联系地址</view>
            <input data-type="address" type="text" placeholder="请输入详细地址" class="huaer-field_input huaer-cell_bd" placeholder-class="huaer-field_placeholder" bindinput="bindKeyInput" value="" />
          </view>
        </view>
        <block wx:if="{{orderData == null}}">
          <view class="microshop-box remark-cont order-logistics bottom-radius">
            <view id="sn_tel" style="display: none;">
              <view class="title text-black sn-icon">
                <image src="http://static.resource.fenxiaov3.weijuju.com/image/mobile/umall/orderdetail/phone.png"></image>手机号
                <text>*</text>
              </view>
              <view class="sntel">
                <input placeholder="请输入手机号" type="text" id="sntel" class="text-input"></input>
              </view>
            </view>
            <!-- 补充信息 -->
            <block wx:for="{{extraItem}}" wx:key="index" wx:for-index="idx" wx:if="{{enableExtraInfo && item.value}}">
              <view class="{{item.type!='select'?'title text-black identity':'block-view text-black identity'}}">
                <text class="requireStar" wx:if="{{item.isRequire}}">*</text>
                <text style='min-width:80px;max-width:120px'>{{item.value}}</text>
                <input placeholder='请输入信息' wx:if="{{item.type == 'txt'}}" bindinput='bindInputOrder' data-id="{{idx}}"></input>

                <view class="huaer-field" style='margin-left:-18px;' wx:if="{{item.type=='radio'}}">
                  <picker class="huaer-field_picker" data-id="{{idx}}" range="{{item.sels}}" value="{{radioIdx}}" mode="selector" bindchange="bindInputOrder">
                    <view class="picker">
                      <text class="block-text" style='font-family:normal;' wx:if="{{item.sels[radioIdx[idx]]}}">{{item.sels[radioIdx[idx]]}}</text>
                      <text class="block-text" wx:else style='color:#808080;height:24px;line-height:24px;'>请选择</text>
                    </view>
                    <view class="fright" style='padding-right:5px;'>
                      <view class="trigger"></view>
                    </view>
                  </picker>
                </view>

                <view class="section_gap" wx:if="{{item.type=='select'}}">
                  <checkbox-group data-id="{{idx}}" wx:for="{{item.sels}}" wx:for-index="selIdx" bindchange="bindInputOrder" style='display:flex;justify-content:space-between;padding:10rpx 40rpx;border-bottom:1px solid #f5f5f5;'>
                    <view style='line-height:25px; text-align:center;color:#8080;'>{{item}}</view>
                    <checkbox value="{{selIdx}}" class="radio"></checkbox>
                  </checkbox-group>
                </view>

                <view class="communityPublish-item-add" bindtap='handleAddImage' wx:if="{{item.type == 'img' && !uploadImgList[idx]}}" data-id="{{idx}}"></view>
                <image src='{{userImagePath + uploadImgList[idx]}}' wx:if="{{uploadImgList[idx] && item.type == 'img'}}" class='communityPublish-item-add-image' data-id="{{idx}}" bindtap='handAddImageMore'></image>
              </view>
            </block>
            <view wx:if="{{showRemarkInput}}" class="title text-black tip-icon" style='display:flex;border:none;margin-left:5px;color:#3a3a3a'>
              备注
              <view style='margin-left:88rpx'>
                <input style='margin-top:-2rpx;' placeholder="给商家留言" bindchange="bindChange" type="text" id="remark" class="text-input"></input>
              </view>
            </view>

          </view>
        </block>

        <view class="radius-20">
          <view class="coupon-item text-black enableDepositItem" bindtap='handleCardModalOpen' wx:if="{{!orderData && accountPackagePrivilege.membercard}}">
            <view style='display:inline-block;'>
              会员卡
              <text class='text-margin main-color' style="{{app.globalData.customStyleColor}}" wx:if="{{cardList.length == 0}}">无可用会员卡</text>
              <text class='text-margin' wx:elif="{{!selectedCard}}">请选择会员卡</text>
              <text class='text-margin' style='color:#3a3a3a !important;font-family:normal;' wx:else>{{selectedCard.cname}}</text>
            </view>
            <view class="fright" style='padding-right:5px;'>
              <view wx:if="{{prepareOrderVo.orderSign.discountScale && prepareOrderVo.orderSign.discountCount}}" class="zan-label zan-label--primary zan-label--small zan-label--plain" style="margin-right: 15px;">折扣{{m1.getFixedMoney(prepareOrderVo.orderSign.discountScale)}}</view>
              <view class="trigger"></view>
            </view>
          </view>
          <view class="coupon-item text-black enableDepositItem" bindtap='handleCouponModalOpen' wx:if="{{!orderData && accountPackagePrivilege.coupon}}">
            <view style='display:inline-block;'>
              优惠券
              <text wx:if="{{couponList.length == 0}}" class="main-color text-margin" style="{{app.globalData.customStyleColor}}">无可用优惠券</text>
              <text class='text-margin' wx:elif="{{!selectedCoupon}}">请选择优惠</text>
              <text class='text-margin' wx:else>已选1张</text>
            </view>
            <view class="fright" style='padding-right:5px;'>
              <view wx:if="{{selectedCoupon && cardList.length > 0}}" style='margin:-3px 0 0 5px' class="zan-label zan-label--primary zan-label--small zan-label--plain">-{{app.globalData.currencySymbol}}{{m1.getFixedMoney(prepareOrderVo.orderSign.ticketPrice)}}</view>

              <view class="trigger"></view>
            </view>
          </view>
          <!--礼品卡-->
          <view class="coupon-item text-black enableDepositItem " bindtap='handleGiftCardModalOpen' wx:if="{{!orderData && accountPackagePrivilege.giftcard}}">
            <view style='display:inline-block;'>
              礼品卡
            </view>
            <view class="fright" style='padding-right:15px;'>
              <text wx:if="{{giftcardList.length == 0}}" class="main-color" style="{{app.globalData.customStyleColor}}">无可用礼品卡</text>
              <text wx:elif="{{!selectedGiftCard}}">请选择礼品卡</text>
              <text wx:else>{{selectedGiftCard.title}}</text>
              <view class="trigger"></view>
            </view>
          </view>
          <view class="coupon-item text-black enableDepositItem" wx:if="{{!orderData && (prepareOrderVo && prepareOrderVo.orderSign.isIntegralDeduct) && accountPackagePrivilege.integral}}">
            <view style='display:inline-block;'>
              积分抵扣
            </view>
            <!-- {{prepareOrderVo && prepareOrderVo.orderSign.enableIntegral}}积分 -->
            <view class="fright enablePoints" style='padding-right:5px;'>
              <view class="enablePointsVal"></view>
              <template is="zan-switch" data="{{app, disabled: enablePointsItemValue , checked:enablePointsChe, componentId: 'switch2' }}"></template>
            </view>
          </view>
          <view class="coupon-item text-black enableDepositItem" wx:if="{{!orderData && accountPackagePrivilege.deposit}}">
            <view style='display:inline-block;'>
              储值金
            </view>
            <view class="fright enableDeposit" style='padding-right:5px;'>
              <view style='position:absolute;left:190rpx;color:#a1a1a1' class="enableDepositVal">{{app.globalData.currencySymbol}}{{prepareOrderVo && m1.getFixedMoney(prepareOrderVo.orderSign.enableDepositItemValue)}}</view>
              <template is="zan-switch" data="{{app, disabled: enableDepositItemValue , checked : enableDepositChe, componentId: 'switch1' }}"></template>
            </view>
          </view>
        </view>

      </view>

      <view class="microshop-box order-goods radius-20" style="margin-bottom: 20rpx">
        <!-- 积分设置 -->
        <view class="total-money text-black">
          <view class="money_item" wx:if="{{consumeGiftIntegral>0}}">
            <view class="fleft">
              支付送积分
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="js-total-money total_price text-main-black">{{consumeGiftIntegral}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{goodsGiftIntegral>0}}">
            <view class="fleft">
              购买商品送积分
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="js-total-money total_price text-main-black">{{goodsGiftIntegral}}</text>
            </view>
          </view>
        </view>
        <view class="total-money text-black" wx:if="{{orderData != null}}">
          <view class="money_item">
            <view class="fleft">
              商品金额
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="js-total-money total_price text-main-black"> {{app.globalData.currencySymbol}}{{m1.getFixedMoney(totalPrice)}}</text>
            </view>
          </view>
          <view class="money_item" style="display: none;">
            <view class="fleft">
              运费
            </view>
            <view class="text-black fright" id="delivery_text">
              <text id="delivery_price text-main-black" class="delivery_price">+ {{app.globalData.currencySymbol}}{{m1.getFixedMoney(deliveryPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.ticketId}}">
            <view class="fleft">
              优惠券
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.ticketPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.cardPrice}}">
            <view class="fleft">
              会员卡折扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.cardPrice)}}</text>
            </view>
          </view>

          <view class="money_item" wx:if="{{orderData && orderData.integralPrice}}">
            <view class="fleft">
              {{orderData && orderData.useIntegral}}积分抵扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.integralPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.depositPrice}}">
            <view class="fleft">
              储值金
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.depositPrice)}}</text>
            </view>
          </view>


          <view class="money_item" wx:if="{{!orderData && selectedCoupon}}">
            <view class="fleft">
              优惠券
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(prepareOrderVo.orderSign.ticketPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.giftCardDiscountMoney}}">
            <view class="fleft">
              礼品卡优惠
            </view>
            <view class="fright">
              <text class="coupon_price"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.giftCardDiscountMoney)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && prepareOrderVo.orderSign.discountCount}}">
            <view class="fleft">
              会员卡折扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(prepareOrderVo.orderSign.discountCount)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && enablePointsSW}}">
            <view class="fleft">
              {{enablePoints}}积分抵扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(pointsToMoney)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && preFirstOrderDiscount}}">
            <view class="fleft">
              首单立减
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{preFirstOrderMoney}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && preShowOverReduce}}">
            <view class="fleft">
              满减
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{preOverReduceMoney}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && enableDepositSW}}">
            <view class="fleft">
              储值金
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(enableDeposit)}}</text>
            </view>
          </view>


          <!-- <view class="count fright text-red main-color final-total" id="total_money">
        <text class="money"> {{app.globalData.currencySymbol}}{{m1.getFixedMoney(calcFinPrice)}}</text>
      </view> -->
          <view class="clear">
          </view>
        </view>
        <view class="total-money text-black" wx:if="{{orderData == null}}">
          <view class="money_item">
            <view class="fleft">
              商品金额
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="js-total-money total_price text-main-black"> {{app.globalData.currencySymbol}}{{m1.getFixedMoney(totalPrice)}}</text>
            </view>
          </view>
          <view class="money_item" style="display: none;">
            <view class="fleft">
              运费
            </view>
            <view class="text-black fright" id="delivery_text">
              <text id="delivery_price" class="delivery_price text-main-black">+ {{app.globalData.currencySymbol}}{{m1.getFixedMoney(deliveryPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.ticketId}}">
            <view class="fleft">
              优惠券
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.ticketPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.cardPrice}}">
            <view class="fleft">
              会员卡折扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.cardPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && preFirstOrderDiscount}}">
            <view class="fleft">
              首单立减
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{preFirstOrderMoney}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.integralPrice}}">
            <view class="fleft">
              {{orderData && orderData.useIntegral}}积分抵扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.integralPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{orderData && orderData.depositPrice}}">
            <view class="fleft">
              储值金
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(orderData.depositPrice)}}</text>
            </view>
          </view>


          <view class="money_item" wx:if="{{!orderData && selectedCoupon}}">
            <view class="fleft">
              优惠券
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(prepareOrderVo.orderSign.ticketPrice)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && selectedGiftCard}}">
            <view class="fleft">
              礼品卡优惠
            </view>
            <view class="fright">
              <text class="coupon_price"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(prepareOrderVo.orderSign.giftCardDiscountMoney)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && prepareOrderVo.orderSign.discountCount}}">
            <view class="fleft">
              会员卡折扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(prepareOrderVo.orderSign.discountCount)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && enablePointsSW}}">
            <view class="fleft">
              {{enablePoints}}积分抵扣
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(pointsToMoney)}}</text>
            </view>
          </view>
          <view class="money_item" wx:if="{{!orderData && enableDepositSW}}">
            <view class="fleft">
              储值金
            </view>
            <view class="text-red main-color fright" style="{{app.globalData.customStyleColor}}">
              <text class="coupon_price text-main-black"> - {{app.globalData.currencySymbol}}{{m1.getFixedMoney(enableDeposit)}}</text>
            </view>
          </view>


          <!-- <view class="count fright text-red main-color final-total" id="total_money">
        <text class="money"> {{app.globalData.currencySymbol}}{{m1.getFixedMoney(calcFinPrice)}}</text>
      </view> -->
          <view class="clear">
          </view>
        </view>
      </view>

      <view class="order-logistics" id="order_logistics" wx:if="{{orderData != null && orderData.status >= 3}}">
        <view class="delivery-num text-black" id="delivery_num">
          <text>快递单号：</text>
          <block wx:if="{{orderData.deliveryCom == null}}">
            <text class="delivery over" id="delivery">无</text>
          </block>
          <block wx:else>
            <text class="delivery over actuallExpNum" id="delivery">{{orderData.deliveryCom}} {{orderData.expressNum}}</text>
            <navigator class="checkExpress" url="/pages/express/express?expressNum={{orderData.expressNum}}&oid={{orderId}}" wx:if="{{openQueryExpress}}">查看物流信息</navigator>
          </block>
        </view>
        <view id="logistics_list"></view>
        <view class="clear"></view>
      </view>

      <view class="order-logistics" wx:if="{{orderData != null && (orderData.status >= 6 || (orderData.refundReason != null && orderData.refundTime != null))}}">
        <text style="padding-left:27rpx;margin-top:5px;display:block;color:#888;">退款信息：</text>
        <view class='retFItem'>
          <text class='retLabel' style="">金额</text>{{app.globalData.currencySymbol}}{{m1.getFixedMoney(refundMoney)}}（{{refundType}}）
        </view>
        <view class='retFItem'>
          <text class='retLabel' style="">退款商品</text>{{refundType}}商品
        </view>
        <view class="delivery-num text-black" style="margin-top:12rpx;">
          <text class='retLabel' style="">退款原因</text>
          <text style="color:#000;">{{orderData.refundReason}}</text>
          <text style="float:right;color:#ccc;" wx:if="{{orderData.status == 6}}">卖家已同意</text>
          <text style="float:right;color:#ccc;" wx:if="{{orderData.status < 6}}">卖家已拒绝</text>
        </view>
        <view class="clear"></view>
      </view>

      <view class="order-logistics order-extrainfo" wx:if="{{orderData != null}}">
        <view class="delivery-num text-black" wx:if="{{orderData.payType != null}}">
          <text>支付方式：</text>
          <text class="delivery over">{{mTool.getPayType(orderData.payType)}}</text>
        </view>
        <view class="delivery-num text-black" wx:if="{{orderData.transactionId != null}}">
          <text>交易流水：</text>
          <text class="delivery over">{{orderData.transactionId}}</text>
        </view>
        <view class="delivery-num text-black" wx:if="{{orderData.orderNum != null}}">
          <text>订单编号：</text>
          <text class="delivery over">{{orderData.orderNum}}</text>
        </view>
        <view class="delivery-num text-black" wx:if="{{orderData.buyTime != null}}">
          <text>下单时间：</text>
          <text class="delivery over">{{orderData.buyTime}}</text>
        </view>
        <view class="delivery-num text-black" wx:if="{{orderData.payTime != null}}">
          <text>付款时间：</text>
          <text class="delivery over">{{orderData.payTime}}</text>
        </view>
        <view class="delivery-num text-black" wx:if="{{orderData.realDeliveryTime != null}}">
          <text>消费时间：</text>
          <text class="delivery over">{{orderData.realDeliveryTime}}</text>
        </view>
        <view class="clear"></view>
      </view>
      <view class="order-logistics order-qrcodeinfo" wx:if="{{orderData != null && (orderData.status == 2 || orderData == 3)}}">
        <view class="text-black" style='padding-bottom:0rpx;' bindtap='toggleQrcodeModal'>
          <text class="zan-icon zan-icon-qr"></text>到店或当面消费时，请向商家出示二维码</view>
      </view>
      <view id="footer_placeholder"> </view>
      <block wx:if="{{orderData == null}}">
        <view wx:if="{{app.globalData.previewuid || app.globalData.tplid}}">
          <button class="zan-btn" disabled="true">预览模式中不能下单</button>
        </view>
        <view wx:else class="order-btn" id="order_btn">
          <text class="bottomRealPay main-color" style="{{app.globalData.customStyleColor}}">实付款： <text style="font-weight: bold;">{{app.globalData.currencySymbol}}{{m1.getFixedMoney(calcFinPrice)}}</text></text>
          <button class="btn-menu order-btn-confirm {{btnLoading?'':'main-color-bg'}}" style="{{btnLoading?'':app.globalData.customStyleBg}}" bindtap="onConfirmOrder" id="btn_confirm" disabled="{{btnLoading}}">提交订单</button>
        </view>
      </block>
      <block wx:else>
        <view class="order-btn" id="order_btn" wx:if="{{orderData.status < 4}}">
          <block wx:if="{{orderData.status == 1}}">
            <button class="btn-menu btn-show" style="color: #333333;background: #fff;border:1rpx solid #E7E5E6" bindtap="onBtnCancel" id="btn_cancel">取消订单</button>
            <button class="btn-menu btn-show main-color-bg" style="{{app.globalData.customStyleBg}}" bindtap="onBtnPay" id="btn_pay">确认付款</button>
          </block>
          <block wx:elif="{{orderData.status == 2 && orderData.payType != 3 && orderData.payType != 4}}">
            <button class="btn-menu btn-show btn-one" style="color: #333333;background: #fff;border:1rpx solid #E7E5E6;" bindtap="onReturnOrder" id="btn_apply">申请退款</button>
          </block>
          <block wx:elif="{{orderData.status == 3}}">
            <button class="btn-menu btn-show btn-one main-color-bg" style="width: 45%;margin:0 5rpx;display:inline-block;{{app.globalData.customStyleBg}}" bindtap="onFinishOrder" id="btn_confirm">确认完成</button>
            <button class="btn-menu btn-show btn-one" style="color: #333333;background: #fff;border:1rpx solid #E7E5E6;margin:0 5rpx;display:inline-block;" bindtap="onReturnOrder" id="btn_apply">申请退款</button>
          </block>
          <block wx:elif="{{orderData.status == 4}}">
          </block>
        </view>
      </block>
      <view class="modal-backdrop qrcode-backdrop" bindtap='toggleQrcodeModal' wx:if="{{showQrcodePopup}}">
        <view class="qrcode-modal" catchtap='handleQrcodeModalTap'>
          <image class="qr-img" src='{{userImagePath+appletScene.qrcodeUrl}}'></image>
          <view class="number">{{orderData.orderNum}}</view>
          <view class="tips">请向商家出示二维码</view>
          <view>
            <button bindtap="switchPasswordCheck" class="pwdCheckBtn">密码核销</button>
          </view>
        </view>
      </view>

      <view class="time_select_popup {{className.popUpStatu}}">
        <view class="time-picker-component">
          <view class='tp-title'></view>
          <view class='tp-main-title'>选择服务时间</view>
          <view class="tp-main">
            <view class="date-scroll-picker">
              <scroll-view scroll-y="true" class="dp-scroll-view" scroll-into-view="day-0" scroll-top="0" scroll-left="0">
                <view class="dp-scroll-wrap">
                  <block wx:for="{{yuyueData.dayArr}}">
                    <view class="dp-scroll-item {{item.active}}" id="{{item.id}}" bindtap="selectedDate">
                      <view class="switcher-title {{item.active=='active'?'main-color':''}}" style="{{item.active=='active'?app.globalData.customStyleColor:''}}">{{m1.getSplitText(item.text)[1]}}({{m1.getSplitText(item.text)[0]}})</view>
                      <view class="switcher-status {{item.active=='active'?'main-color':''}}" style="{{item.active=='active'?app.globalData.customStyleColor:''}}">{{item.canyuyue}}</view>
                    </view>
                  </block>
                </view>
              </scroll-view>
            </view>
            <view class="date-time-picker-wrap">
              <scroll-view scroll-y="true" class="dtp-scroll-view" scroll-top="0" scroll-left="0">
                <view class="dtp-scroll-wrap">
                  <block wx:for="{{yuyueData.hourArr}}">
                    <view class="dtp-scroll-item-wrap" wx:if="{{item.repertory>0 && yuyueData.canyuyue == '可预约'}}">
                      <view class="dtp-scroll-item {{item.statuStyle}} {{item.statuStyle=='selected'?'main-color':''}}" style="{{item.statuStyle=='selected'?app.globalData.customStyleColor:''}}" data-statu="{{item.statuStyle}}" id="{{item.id}}" bindtap="selectedHourTime">
                        <view class="dtp-item-text">
                          <view>{{item.text}}</view>
                          <view wx:if="{{item.repertory<=0}}" class="dtp-item-state">暂不可约</view>
                          <view wx:else class="dtp-item-state"></view>
                        </view>
                        <view wx:if="{{isShowEndTime && yuyueData.selectedEndHourId&&yuyueData.selectedEndHourId==item.id && yuyueData.curDay==yuyueData.selectedEndDay}}" class="selected-icon main-color" style="{{mainTheme}}">
                          <i class="icon">√</i>
                        </view>
                        <view wx:elif="{{!isShowEndTime && yuyueData.selectedHourId&&yuyueData.selectedHourId==item.id  && yuyueData.curDay==yuyueData.selectedDay}}" class="selected-icon main-color" style="{{mainTheme}}">
                          <i class="icon">√</i>
                        </view>
                      </view>
                    </view>

                  </block>
                  <view style='text-align:center;padding:15rpx;color:#ccc;'>没有更多可预约时间了</view>
                </view>
              </scroll-view>
            </view>
            <view class="form-id-component" report-submit="">
              <view class="show_price_box" style="visibility: {{usenewspec ?'hidden' : 'visible'}};">
                <text style="color: #595959;">待支付：</text>
                <text class="show_price main-color" style="{{app.globalData.customStyleColor}}">{{app.globalData.currencySymbol}}{{(yuyueData.selectedPrice == -1)?m1.getFixedMoney(totalPrice) : m1.getFixedMoney(yuyueData.selectedPrice)}}</text>
              </view>
              <view bindtap="onHindTimeSelect" class="confirm main-color-bg" style="{{app.globalData.customStyleBg}}">确认</view>
            </view>
          </view>
        </view>
      </view>
      <template is="couponListTpl" data="{{app,showCouponList:showCouponList,couponList:couponList,preferenceCodeList:preferenceCodeList,selectedCoupon:selectedCoupon,staticResPath:staticResPath,userImagePath:userImagePath,scrollTop:scrollTop}}"></template>
    </view>

  </scroll-view>
  <template is="giftcardListTpl" data="{{app,showGiftCardList:showGiftCardList,giftcardList:giftcardList,selectedGiftCard:selectedGiftCard,preferenceCodeList:preferenceCodeList,staticResPath:staticResPath,userImagePath:userImagePath,scrollTop:scrollTop}}"></template>
  <template is="cardListTpl" data="{{app,showCardList:showCardList,cardList:cardList,selectedCard:selectedCard,staticResPath:staticResPath,userImagePath:userImagePath}}"></template>
  <template is="passwordCheck" data="{{app,showPwdCheck,pcNameErr,pcPwdErr,verId:orderData.id}}"></template>
  <include src="/pages/template/copyright.wxml" />
  <include src="/pages/template/authModal.wxml" />
</view>